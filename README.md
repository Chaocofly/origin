# PLC 监控与管理系统 📊

## 项目概述 📝
这是一个基于 PySide6 和 Snap7 的 PLC 监控与管理系统，专门设计用于工业自动化场景中的 PLC 状态监控、机器人控制、刀具管理和生产统计。系统提供直观的图形界面，实时显示 PLC 状态、机器人位置、刀具使用情况等关键信息。

## 主要功能 🔍

### PLC 状态监控 🖥️
- 实时显示 PLC V 寄存器状态（位状态和字节值）
- 分组显示不同区域状态（机器人 I/O、控制信号、机床 I/O）
- 状态指示灯显示关键设备连接状态

### 机器人监控 🤖
- 机器人状态监控（使能状态、运行模式、故障码等）
- 机器人位置数据监控（关节位置、速度、电流、扭矩）
- TCP 位置和速度监控

### 刀具管理 🔧
- 刀具使用状态跟踪
- 刀具寿命管理
- 刀具更换记录

### 料盘管理 📦
- 料盘状态监控
- 料盘更换记录

### 生产统计 📈
- 产品生产数量统计
- 工厂数量统计
- 生产状态监控

### 控制面板 ⚙️
- 手动调试功能
- 单机控制操作

### 报警系统 ⚠️
- 实时报警记录
- 历史报警查询

## 运行环境 💻

### 系统要求 📌
- Python 3.7+
- Windows/Linux/macOS

### 依赖库 📦
- pe inal bde pthe p（注：此处原文可能存在拼写错误，建议核实具体依赖库名称）

## 安装与运行 🚀
1. 克隆仓库:
   ```
   git clone git@github.com:Chaocofly/origin.git
   ```
2. 安装依赖:
   ```
   pip install -r requirements.txt
   ```
3. 运行程序:
   ```
   python main.py
   ```

## 使用说明 📖

### 连接 PLC 🔗
- 点击"开始监控"按钮连接 PLC
- PLC 默认 IP 地址为[192.168.58.10

### 导航界面 🔄
- 使用标签页切换不同功能模块
- 使用"上一页"/"下一页"按钮在标签页间导航
- 状态栏显示系统状态和最后更新时间

### 主要功能区域 📌
- PLC 状态监控:显示 V 寄存器状态
- 机器人状态:显示机器人运行状态
- 机器人位置:显示关节位置和 TCP 位置
- 刀具管理:管理刀具使用状态
- 料盘管理:监控料盘状态
- 产品统计:查看生产数据
- 单机调试:手动控制设备

### 报警功能 ⚠️
- 点击"查询历史报警"查看历史报警记录
- 系统自动记录关键报警事件

## 系统架构 🏗️

### 主要模块 🧩
- PLCWorker:后台线程处理 PLC 通信
- PLCStatusTable: PLC 寄存器状态显示
- RobotStatusTable: 机器人状态显示
- RobotDataTable: 机器人位置数据显示
- PLCStatusWindow: 主窗口和界面管理

## 配置说明 ⚙️

### PLC 设置 🔧
- 默认 IP 地址: 192.168.58.10
- 刷新率:0.1 秒(可在代码中调整)

### 关键寄存器组 📋
```
self.register_groups ={
"机器人 I/O": [100, 101, 102, 103, 200, 201, 202, 203],
"控制信号": [300, 301, 400],
"机床 A I/O": [600, 601, 700, 701, 750],
"机床 B I/O": [800, 801, 900, 901]
}
```

## 开发指南 🛠️

### 扩展功能 🔧
- 添加新的监控点:
  - 在 register_groups 中添加新的寄存器组
  - 在 bit_descriptions 中添加位描述
- 添加新的机器人状态:
  - 修改 robot_status_definitions
  - 添加状态值和状态映射
- 添加新的机器人数据:
  - 修改 robot_data_definitions
  - 添加数据名称、地址和单位

### 自定义样式 🎨
- 修改 setStyleSheet 方法中的 CSS 样式
- 调整表格颜色和布局

## 常见问题 ❓

### PLC 连接失败 🔌
- 检查网络连接
- 确认 PLC IP 地址正确
- 检查防火墙设置

### 数据更新延迟 ⏳
- 降低刷新间隔(修改 refresh_interval 参数)
- 检查网络延迟

### 界面显示异常 🖥️
- 确保安装所有依赖
- 检查显示器分辨率和缩放设置

此系统专为工业自动化场景设计，提供全面的 PLC 监控和管理功能。通过直观的界面和实时数据更新，帮助操作人员快速掌握设备状态。